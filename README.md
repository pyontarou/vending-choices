# アプリケーション名 : Vending-choices

## 画像の説明(画像URL) :![vendingchoices](https://user-images.githubusercontent.com/78154493/111933119-29a7f280-8b02-11eb-9986-47c0df2a22c4.jpg)
	
# アプリケーション概要 :
自動販売機を模倣したアプリケーションを作成しました。

## ・ 動作確認方法
  接続先情報<br/>
  https://vending-choices.herokuapp.com/  

  ID/Pass  
  ID: admin  
  Pass: 9317  
  テスト用アカウント等  
  購入者用（20歳以上）  
  メールアドレス: aa@a.com  
  パスワード: q1w2e3r4  
  購入者用（20歳未満）<br/>
  メールアドレス名: aaaaa@aaa.com<br/>
  パスワード: q1w2e3r4<br/>
  購入用カード情報  
  番号：4242424242424242  
  期限：Fri Dec 24 2021 00:00:00 GMT+0900 (日本標準時)  
  セキュリティコード：123  
  
  Githubリポジトリ  
  https://github.com/pyontarou/vending-choices.git  
 
 
WebブラウザGoogle Chromeの最新版を利用してアクセスしてください。<br/>
ただしデプロイ等で接続できないタイミングもございます。その際は少し時間をおいてから接続してください。<br/>
接続先およびログイン情報については、上記の通りです。<br/>
同時に複数の方がログインしている場合に、ログインできない可能性があります。<br/>
テストアカウントでログイン→トップページから商品検索→商品選択→商品購入 <br/>
確認後、ログアウト処理をお願いします。<br/>
 
<br/>

## ・開発状況
  開発環境<br/>
  Ruby/Ruby on Rails/MySQL/Github/AWS/Visual Studio Code<br/>
  開発期間と平均作業時間<br/>
  開発期間：3/3~3/15(10日間）<br/>
  1日あたりの平均作業時間：10<br/>
  合計：100時間程度<br/>
  

<br/>

## ・制作背景
ペルソナ : 20~50代の時間に余裕がなく、お酒を趣味・嗜好とする男性。  
自動販売機で購入するメリットとして、「スピーディーに購入できる」が挙げられます。  
その利点を活かし、時間に余裕のない方の隙間時間に毎日チェックすることが楽しみとなる物を、
提供できたらと考え作成に至りました。
<br/>

<br/>

## ・洗い出した要件
| 優先順位<br/>（高：3、中：2、低：1) | 機能            |  目的                                              | 詳細                                                                                                        | ストーリー(ユースケース)                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 見積もり（所要時間） |
|-----------------------------------|-----------------|--------------------------------------------------|------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
| 3                               | ユーザー管理機能 | 顧客管理                                          | 新規登録を行うことで商品を購入することができ、新規登録時に住所の登録も行うことで、購入時の入力を少なくする。             | ・必要な情報を適切に入力すると、新規登録/ログインができる<br/>・新規登録・ログイン共にエラーハンドリングができていること（入力に問題がある状態で「会員登録」または「ログイン」ボタンが押された場合、情報は受け入れられず、各ページでエラーメッセージが表示されること）<br/>・名前の他、住所も登録も行う                                                                                                                                                                                                                                           | 4                 |
| 3                                | 商品一覧機能      | 商品を見やすくすることにより、購買意欲を上げる              | カテゴリー検索によりカテゴリーごとに一覧表示の結果を可能にする                                                        | ・商品は９点出品されていることが前提<br/>・商品名/会社名/味/値段などを表示し、どのような商品なのかわかりやすくする<br/>・カテゴリー検索した商品の検索結果のページで表示する                                                                                                                                                                                                                                                                                                                                         | 5                 |
| 3                                | 商品購入機能    | ユーザーが欲しい商品を購入できるようにする            | 商品一覧表示から、欲しい商品を選び、購入画面に遷移する。<br/>支払いはクレジットカード決算を採用する。                   | ・ログイン状態の出品者以外のユーザーのみ、必要な情報を適切に入力すると、商品の購入ができること<br/>・商品購入ページでは、一覧や詳細ページで選択した商品の情報（商品名・商品画像・販売金額）が、見本商品と同様の形で出力されること<br/>・ログアウト状態のユーザーは、商品購入ページに遷移しようとすると、ログインページに遷移すること<br/>・クレジットカード決済ができること・クレジットカードの情報は購入の都度入力<br/>・クレジットカード情報は必須であり、正しいクレジットカードの情報で無いときは決済できないこと<br/> | 4                 |
| 3                                | 年齢算出機能     | 20歳未満のユーザーにはアルコールの購入をできないようにする | 20歳未満のユーザーがアルコールを購入できないように、カテゴリー検索からアルコールを選んだ場合、商品一覧が表示されないようにする | ・新規登録必須入力項目の生年月日より年齢を算出する<br/>・20歳未満のユーザーにはカテゴリー検索下にアルコールの購入はできない旨の注意勧告が表示されるようにする。<br/>・カテゴリーからアルコールを選択しても、一覧表示に商品が表示されないようにする<br/>                                                                                                                                                                                                                                                                              | 3                 |
| 2                                | ユーザー詳細機能  | ユーザーの新規登録時に入力した内容を表示する         | 入力した内容に間違いがないか確認を行えるようにする。                                                                  | ・新規登録済みでログインしていることが前提<br/>・ログインユーザーはログイン中のユーザーの登録を変更できる<br/>・ログインユーザー以外のユーザーの詳細は確認できない<br/>・新規登録後、登録内容表示ボタンより登録内容詳細ページへ遷移できる<br/>・新規登録後表示されるニックネームをクリックすると登録内容詳細ページへ遷移できる<br/>                                                                                                                                                                                                       | 3                 |
| 2                               | ユーザー編集機能 | ユーザーが登録した内容を編集することができる           | 登録の変更できるようにする                                                                                       | ・新規登録済みでログインしていることが前提<br/>・ログインユーザーはログイン中のユーザーの登録を変更できる<br/>・ログインユーザー以外のユーザーの変更はできない<br/>・購入画面からも編集画面へ遷移できる                                                                                                                                                                                                                                                                                                                         | 3                 |

<br/>
<br/>

## ・実装内容
未登録ユーザーは、商品の検索は行えますが、購入はできず、ユーザー登録を促されます。<br/>
登録済みユーザーは、商品の検索・購入、また、ユーザー本人のみ登録内容の確認・変更ができます。
20歳未満のユーザーは、お酒類の表示はされず購入ができないようになっています。

<br/>

## ・工夫したポイント
・ログイン、ログアウトの状態が一目でわかるように、表示をイメージを変えました。<br/>
  https://gyazo.com/ba71e994ee1b441130175fa124dcc317

・未登録ユーザーは、商品一覧にて商品の閲覧、商品検索は行えますが、購入機能は使用できず、ユーザー登録を促されます。<br/>
  https://gyazo.com/d7dadb732b01ee17ae646828b6d31b76

・登録済みユーザーは、商品購入が行え、ユーザー登録の確認・編集も行えます。<br/>
  https://gyazo.com/7171145de2485d1c7ac185b3cb9141ab
  https://gyazo.com/5e7222141b45240f7f1a60cd5c9fab63

・20歳未満のユーザーは、ログイン後お酒の購入はできない旨のコメントが出て、商品検索にてお酒を選んだ場合、商品の一覧表示はされず、 
購入できない旨のコメントが表示され、Topページへ促されます。<br/>
  https://gyazo.com/11d1424a73d8d6aef39b1717e08a0ef9

・レスポンシブ対応のWebサイトを作成しました。<br/>
  https://gyazo.com/8f7ee0b682fc673068cc1b639c959477


<br/>

# ER図
https://gyazo.com/9d6df9e6d44668180d273f172eadd166

<br/>

# テーブル設計

## users テーブル

| Column                | Type   | Options                  |
| --------------------- | ------ | ------------------------ |
| nickname              | string | null: false              |
| email                 | string | null: false, unique:true |
| encrypted_password    | string | null: false              |
| prefecture_code       | string | null: false              |
| prefectures_id        | integer| null: false              |
| city                  | string | null: false              |
| address               | string | null: false              |
| building_name         | string | null: false              |
| phone_number          | string | null: false              |
| last_name             | string | null: false              |
| first_name            | string | null: false              |
| last_name_kana        | string | null: false              |
| first_name_kana       | string | null: false              |
| birth_day             | date   | null: false              |

### Association

- has_many :orders

## items テーブル

| Column          | Type       | Options                        |
| --------------- | ---------- | ------------------------------ |
| name            | string     | null: false                    |
| price           | integer    | null: false                    |
| where_from      | string     | null: false                    |
| taste_type      | string     | null: false                    |
| company_name    | string     | null: false                    |
| alcohol_content | string     |                                |
| alcohol_type    | string     |                                |


### Association

- has_one :order

## orders テーブル

| Column     | Type       | Options                        |
| ---------  | ---------- | ------------------------------ |
| user       | references | null: false, foreign_key: true |
| item       | references | null: false, foreign_key: true |

### Association

- belongs_to :item
- belongs_to :user




